<%# if params[:auth_token] != @client_company.auth_token %>
<% if params[:auth_token] == "846CD88B4B" || (params[:attendee].present? && params[:attendee][:auth_token] == "846CD88B4B") %>
  <div class="container-seven-large-form">
    <div id='attendee-form-logo'>
      <%= image_tag "SEVENLOGO_SQUARE2.png" %>
      <img src="https://media.glassdoor.com/companyupdate/w600/1519/intel-corporation-companyupdate-1599247060524.jpg" alt="" >
    </div>
    <% if !user_signed_in? %>
      <%= simple_form_for :attendee, url: intel_form_path, method: 'GET' do |f| %>
        <%# attendee = IntelAttendee.all.filter("{Email} = '#{params[:attendee][:email]}'") %>
        <% if @attendee.present? %>
          <div class='flex-column-between-centered'>
            <%= f.input :email, input_html: { value: @attendee['Email'], style: 'width:30rem;' }, disabled: true, required: false %>
          </div>
        <% elsif params[:attendee].present? && !@attendee.present? %>
          <% controller.redirect_to intel_new_attendee_path(email: params[:attendee][:email], auth_token: params[:attendee][:auth_token]) %>
        <% else %>
          <div id="attendee-form-title">
            <h3>Merci de vous indentifier</h3>
          </div>
          <div class="form-div">
            <span class='form-label'>Adresse email</span>
            <%= f.input :email, label: false %>
            <%= f.hidden_field :auth_token, :value => params[:auth_token] %>
          </div>
          <p class="center-button"> <%= f.submit 'Connexion', class: 'btn btn-edit-yellow' %> </p>
        <% end %>
      <% end %>
  </div>
      <% if @attendee.present? %>
        <div class="centered-item">
          <%= simple_form_for :subscription, url: intel_subscription_path, method: 'GET' do |f| %>
            <% if @attendee['Events']&.include?('recx4QlAxuGX1oKSv') %>
              <%= f.input :event1, as: :boolean, input_html:{checked: true} %>
            <% else %>
              <%= f.input :event1, as: :boolean %>
            <% end %>
            <% if @attendee['Events']&.include?('recTtCEak1ME1Nd8j') %>
              <%= f.input :event2, as: :boolean, input_html:{checked: true} %>
            <% else %>
              <%= f.input :event2, as: :boolean %>
            <% end %>
            <%= f.hidden_field :attendee, :value => @attendee.id %>
            <%= f.hidden_field :auth_token, :value => params[:auth_token] %>
            <p class="center-button"> <%= f.submit 'Soumettre', class: 'btn btn-edit-yellow' %> </p>
          <% end %>
        </div>
      <% end %>
    <% end %>
  <% else %>
    <div id="warning-message">
      <h1>Access restricted</h1>
    </div>
  <% end %>
  <button id="button-event1">event1</button>
  <button id="button-event2">event2</button>


<script>
  button1 = document.getElementById('button-event1');
  input1 = document.getElementById('subscription_event1');
  if (input1.checked) {
    button1.classList.toggle('intel-button-active');
  }
  button2 = document.getElementById('button-event2');
  input2 = document.getElementById('subscription_event2');
  if (input2.checked) {
    button2.classList.toggle('intel-button-active');
  }
  button1.addEventListener('click', event => {
    if (input1.checked) {
      input1.checked = false;
    } else {
      input1.checked = true;
    }
    event.currentTarget.classList.toggle('intel-button-active');
  })
  button2.addEventListener('click', event => {
    if (input2.checked) {
      input2.checked = false;
    } else {
      input2.checked = true;
    }
    event.currentTarget.classList.toggle('intel-button-active');
  })
</script>

<script>
  const field = document.querySelectorAll('.form-div');
  field.forEach(function(div){
    let span = div.querySelector('.form-label');
    let input = div.getElementsByTagName('input')[0];
     if (input.value !== '') {
      span.classList.add('form-label-active')
    }
    div.addEventListener('focusin', (event) => {
      input.focus();
      span.classList.add('form-label-active')
    })
    span.addEventListener('click', (event) => {
      input.focus();
      span.classList.add('form-label-active')
    });
    div.addEventListener('focusout', (event) => {
      if (input.value === '') {
        span.classList.remove('form-label-active')
      }
    });
  })
</script>
